# Упрощённая установка Arch Linux с помощью макета блочной установки

## Введение

Установка Arch Linux может быть простой и быстрой при использовании специального макета блочной установки. Этот подход предоставляет:

*   **Полный контроль над процессом**
*   **Высокую скорость настройки**
*   **Гибкое редактирование параметров под ваши нужды**

В отличие от автоматизированных скриптов, макет блочной установки позволяет детально разобраться в каждом блоке. Оба описанных способа были лично протестированы и показали надёжность.

## Способы установки

### 1️⃣ Установка через SSH

**Требуется:**

*   Управляющий компьютер (с графическим окружением)
*   Управляемый компьютер (для установки Arch Linux)

**Процесс:**

*   Все команды передаются с управляющего компьютера через SSH-соединение.

**Преимущества:**

*   Удобное удалённое управление
*   Комфортная среда для ввода команд
*   Доступ к продвинутым текстовым редакторам

### 2️⃣ Установка из Live-образа

**Требуется:**

*   Live-образ, совместимый с Arch Linux (например, EndeavourOS)

**Процесс:**

1.  Загрузитесь с Live-образа.
2.  Клонируйте репозиторий с макетом блочной установки командой:
    `git clone https://github.com/rubleiura/arch`
3.  Ознакомьтесь с содержимым.
4.  Выберите все необходимые инструменты для установки и настройки Arch Linux.
5.  Копируйте команды или целые блоки из макета блочной установки.
6.  Вставляйте в терминал и дождитесь выполнения каждой операции.

**Особенности:**

*   Гибкий ввод команд (по отдельности или блоками)
*   Требуется понимание выполняемых действий
*   Непосредственный визуальный контроль процесса

## Преимущества макета блочной установки

*   ▶️ **Последовательная структура** (описание + команды в каждом блоке)
*   🛠️ **Гибкое редактирование параметров** (ручной контроль как в bash-скриптах)
*   🖱️ **Удобное копирование команд мышью**
*   👶 **Интуитивность для новичков**
*   🔁 **Возможность группового редактирования переменных**

## 🛠️ Подготовка макета: Настройка переменных

Перед началом установки крайне важно **настроить макет под ваше конкретное оборудование и предпочтения**. Макет использует систему **переменных**, которые нужно заменить реальными значениями.

### 🎯 Зачем это нужно?

*   **Индивидуальная настройка:** Макет универсален, но ваша система - уникальна. Переменные позволяют указать ваши диски, имя пользователя, язык и т.д.
*   **Избежание ошибок:** Неправильно указанный путь к диску (`/dev/sdX`) может привести к потере данных. Настройка переменных предотвращает такие ошибки.
*   **Удобство и гибкость:** Вместо того чтобы искать и менять каждое упоминание, например, имени диска или пользователя по всему макету вручную, вы меняете его **один раз в специальной таблице**, а затем используете **групповое переименование**.

### 📊 Что такое "переменные" в макете?

Это заранее определённые "заполнители", такие как:

*   `sdx` - Имя диска для установки (например, `sda`, `nvme0n1`).
*   `sda1 sda2 sda3` - Имена будущих разделов (например, `nvme0n1p1 nvme0n1p2 nvme0n1p3`).
*   `XXXX` - Локаль системы (например, `ru_RU`, `en_US`).
*   `YYYY` - Раскладка клавиатуры (например, `ru`, `us`).
*   `ZZZZ` - Шрифт консоли (например, `cyr-sun16`, `lat9w-16`).
*   `forename` - Имя пользователя (например, `user`).
*   `User Name` - Полное имя пользователя (например, `User Name`).
*   `Sony` - Имя компьютера (hostname, например, `MyArchPC`).
*   `amd-ucode` / `intel-ucode` - Пакет микрокода процессора.
*   `linux-lts` / `linux` - Устанавливаемое ядро.
*   `4G` - Размер раздела подкачки (swap).
*   `defaults` - Параметры монтирования Btrfs (например, `ssd,noatime,...`).
*   `man-pages-YYYY` - Пакет локализованных man-страниц (например, `man-pages-ru`).

### 📈 Пошаговая инструкция по настройке

1.  **Диагностика оборудования (Блок 3):**
    *   Запустите **Блок 3: ДИАГНОСТИКА ОБОРУДОВАНИЯ** вашего макета.
    *   Внимательно изучите вывод: определите диск для установки, его тип (SSD/HDD), объем ОЗУ, производителя процессора (Intel/AMD).

2.  **Открытие макета:**
    *   Откройте файл макета установки (например, `arch_install_uefi.sh`) в **текстовом редакторе**.
    *   *Если вы устанавливаете через SSH, используйте редактор на управляющем компьютере.*
    *   *Если вы устанавливаете из Live-образа (например, EndeavourOS), используйте графический редактор, доступный в системе (например, `xed`, `kate`, `gedit`, `mousepad`).*

3.  **Настройка таблицы переменных (Блок 4):**
    *   Найдите **Блок 4: НАСТРОЙКА ПЕРЕМЕННЫХ (ОБЯЗАТЕЛЬНО!)**.
    *   Найдите таблицу с переменными в этом блоке.
    *   **Вручную** замените значения "заполнителей" в **строках таблицы** на реальные данные, полученные на шаге 1 и исходя из ваших предпочтений:
        *   `sdx` -> Имя вашего диска (например, `nvme0n1`).
        *   `sda1 sda2 sda3` -> Имена ваших будущих разделов (например, `nvme0n1p1 nvme0n1p2 nvme0n1p3`).
        *   Выберите строку с вашей страной и замените `XXXX YYYY ZZZZ` на соответствующие значения (например, для России: `ru_RU ru cyr-sun16`).
        *   `login` -> Ваше имя пользователя.
        *   `User Name` -> Ваше полное имя.
        *   `Sony` -> Имя вашего компьютера (hostname).
        *   `amd-ucode` -> Замените на `intel-ucode`, если у вас процессор Intel.
        *   `linux-lts` -> Оставьте или замените на `linux`, если предпочитаете стабильное или самое новое ядро.
        *   `4G` -> Размер swap (например, `16G`, если планируете гибернацию на 16 ГБ ОЗУ).
        *   `defaults` -> Замените на рекомендованные параметры монтирования для вашего типа диска из Блока 3 (например, для SSD: `ssd,noatime,space_cache=v2,compress=zstd:2,discard=async`).

4.  **Групповое переименование переменных:**
    *   Используйте функцию **"Найти и Заменить"** вашего текстового редактора (`Ctrl+H`).
    *   Произведите **замещение ВСЕХ вхождений** каждой переменной в **остальной части макета** (кроме таблицы в Блоке 4, которую вы уже заполнили):
        *   Найти: `sdx` -> Заменить на: `nvme0n1`
        *   Найти: `sda1` -> Заменить на: `nvme0n1p1`
        *   Найти: `sda2` -> Заменить на: `nvme0n1p2`
        *   Найти: `sda3` -> Заменить на: `nvme0n1p3`
        *   Найти: `XXXX` -> Заменить на: `ru_RU`
        *   Найти: `YYYY` -> Заменить на: `ru`
        *   Найти: `ZZZZ` -> Заменить на: `cyr-sun16`
        *   Найти: `login` -> Заменить на: `user`
        *   Найти: `User Name` -> Заменить на: `User Name`
        *   Найти: `Sony` -> Заменить на: `MyArchPC`
        *   Найти: `amd-ucode` -> Заменить на: `intel-ucode` (если нужно)
        *   Найти: `linux-lts` -> Заменить на: `linux` (если меняли)
        *   Найти: `4G` -> Заменить на: `16G` (если меняли)
        *   Найти: `defaults` -> Заменить на: `ssd,noatime,space_cache=v2,compress=zstd:2,discard=async` (или параметры для HDD)
        *   Найти: `man-pages-YYYY` -> Заменить на: `man-pages-ru` (замените `YYYY` на ваш код языка)
        *   *(Убедитесь, что заменили `$USERNAME` в Блоке 14 на значение переменной `login`, например, `user`)*

5.  **Финальная проверка и сохранение:**
    *   Внимательно пролистайте весь отредактированный макет.
    *   Убедитесь, что все пути к дискам/разделам, имена пользователей, настройки локали и другие параметры выглядят корректно.
    *   **Обязательно сохраните файл** с внесенными изменениями!

Теперь ваш макет готов к использованию! Переходите к выполнению Блока 1 (если требуется) и следуйте дальнейшим инструкциям.

## 🖥️ Установка графических сред

После базовой установки системы вы можете установить графическую среду. Макет предоставляет готовые блоки для популярных DE/WM, включая KDE Plasma, GNOME, XFCE4, MATE, Cinnamon, LXQt, LXDE, Budgie, а также **Trinity Desktop (TDE)**.

### 🌳 Особенности установки Trinity Desktop (TDE)

Trinity Desktop - это форк KDE 3.5, предлагающий классический пользовательский интерфейс.

**Установка:**

1.  В вашем макете найдите **БЛОК 15: УСТАНОВКА ГРАФИЧЕСКОЙ СРЕДЫ**.
2.  Найдите подблок **УСТАНОВКА TRINITY DESKTOP**.
3.  **Просто запустите подблок.** Все необходимые команды для добавления репозитория Trinity, импорта ключей и установки мета-пакета `tde-meta` уже раскомментированы.

**Локализация TDE:**

*   Макет устанавливает базовые пакеты TDE (`tde-meta`).
*   Для установки **локализации интерфейса TDE** на ваш язык, после выполнения основного блока TDE:
    1.  Установите соответствующий пакет `tde-i18n-<код_языка>` из репозитория Trinity. Например, для русского языка:
        `sudo pacman -S tde-i18n-ru`
    2.  Полный список доступных языковых пакетов можно найти на зеркале репозитория Trinity (например, `https://mirror.ppa.trinitydesktop.org/trinity/archlinux/x86_64/`) или в выводе `pacman -Ss tde-i18n`.

**Важно:** Убедитесь, что репозиторий Trinity корректно добавлен и ключи импортированы (это делает блок установки TDE в макете) перед установкой `tde-i18n-*`.

## 🧭 Навигация по макету

*   `Arch UEFI WAYLAND.sh`: Основной макет установки для систем с UEFI.
*   `Arch BIOS WAYLAND.sh`: Основной макет установки для систем с BIOS (Legacy boot).
*   `README.md`: Подробная инструкция по настройке переменных в макете (этот документ).

## 📦 Содержимое репозитория

(Список файлов...)

## 📢 Критические рекомендации

### 🔐 Права доступа

*   Всегда используйте права администратора (root) там, где это необходимо.
*   Проверяйте текущие права командой `whoami`.

### 🔍 Диагностика оборудования (Блок 3)

*   После выполнения блока диагностики:
    *   **Обязательно отредактируйте переменные в Блоке 4.**
    *   Убедитесь в соответствии параметров вашей системе.
    *   При необходимости повторите Блоки 3-4 до корректной настройки.
*   Используйте групповое замещение (Find/Replace):
    *   Для SSH: редактируйте на управляющем компьютере.
    *   Для Live-образа: используйте редакторы, доступные в Live-системе.
*   Это гарантирует согласованное изменение переменных во всём макете.

### 👀 Внимательность

*   Контролируйте выполняемые команды и их вывод.
*   Понимайте назначение каждой операции.
*   Проверяйте вывод на наличие ошибок.
*   При ошибках: **остановитесь** → **проанализируйте** → **устраните причину**.

## Заключение

Данный макет блочной установки создан для упрощения установки Arch Linux без глубоких знаний программирования. Он позволяет:

*   Понять структуру установки
*   Адаптировать процесс под свои нужды
*   Сделать установку комфортной и осознанной

Удачи в освоении Arch Linux! 🐧
